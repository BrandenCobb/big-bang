{{- if .Values.airflow.enabled }}
apiVersion: v1
kind: Namespace
metadata:
  labels:
    app: {{ .Release.Name }}-airflow
  name: airflow

---
apiVersion: v1
kind: Secret
metadata:
  name: appsrepo
  namespace: bigbang
type: opaque
data:
  password: {{ .Values.jaic.credentials.password | b64enc }}
  username: {{ .Values.jaic.credentials.username | b64enc }}

---
apiVersion: v1
kind: Secret
metadata:
  name: il2-registry
  namespace: airflow
type: kubernetes.io/dockerconfigjson
data:
  .dockerconfigjson: {{ template "imagePullSecret2" . }}
{{- end }}